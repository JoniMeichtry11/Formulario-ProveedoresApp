<div class="results-container">
  <h1 class="title">Resultados</h1>

  @if (loading()) {
    <div class="loader-container">
      <div class="loader"></div>
      <p class="mt-2 text-primary">Cargando resultados...</p>
    </div>
  } @else {
    @if (formularios().length === 0) {
      <p class="text-gray-500 text-center mt-6">No hay registros aún.</p>
    } @else {
      <ul class="space-y-4 mt-6 text-dark">
        @for (f of formularios(); track f.nombre) {
          <li class="card animate-fadeIn">
            <h2 class="font-bold text-primary">{{ f.nombre }}</h2>
            <p class="text-primary"><span class="label">Empresa:</span> {{ f.empresa }}</p>
            <p class="text-primary"><span class="label">Teléfono:</span> {{ f.telefono }}</p>
            <p class="text-primary"><span class="label">Email:</span> {{ f.email }}</p>
            <p class="text-primary"><span class="label">Interés:</span> {{ f.interes }}</p>

            <!-- Bloque de feedback -->
            @if(f.feedback){
              <div class="mt-3 border-t pt-3">
                <p class="font-semibold text-primary">Feedback:</p>
                <div class="flex items-center space-x-1">
                  @for (i of [1,2,3,4,5]; track i) {
                    <span class="text-xl"
                          [class.text-yellow-400]="i <= f.feedback.estrellas"
                          [class.text-gray-300]="i > f.feedback.estrellas">
                      ★
                    </span>
                  }
                </div>
                @if(f.feedback.comentario){
                  <p class="text-gray-700 mt-2 italic">"{{ f.feedback.comentario }}"</p>
                }
              </div>
            }
          </li>
        }
      </ul>
    }
  }
</div>
